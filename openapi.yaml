openapi: 3.1.0
info:
  title: Jira MCP Server API
  description: API for creating Jira issues via Custom GPT Actions
  version: 1.0.0
servers:
  - url: https://jira-mcp-server-83ev.onrender.com
    description: Production server
components:
  schemas: {}
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: "API Key"
      description: "Enter your API key as a Bearer token"
paths:
  /api/create-issue:
    post:
      tags:
        - Jira Issues
      summary: Create a Jira issue
      description: Creates a new issue in the configured Jira project
      operationId: createJiraIssue
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - summary
                - description
                - issuetype
              properties:
                summary:
                  type: string
                  description: The issue summary/title
                  example: "Fix login bug"
                description:
                  oneOf:
                    - type: string
                      description: Plain text description (will be converted to ADF format)
                      example: "Users cannot log in with their credentials"
                    - type: object
                      description: |
                        Atlassian Document Format (ADF) JSON object for rich text formatting.
                        Preferred format - supports bold, italic, links, lists, etc.
                        If provided, this will be used directly without conversion.
                      required:
                        - type
                        - version
                        - content
                      properties:
                        type:
                          type: string
                          enum: ["doc"]
                          example: "doc"
                        version:
                          type: number
                          enum: [1]
                          example: 1
                        content:
                          type: array
                          description: Array of ADF content nodes (paragraphs, headings, lists, etc.)
                          items:
                            type: object
                          example:
                            - type: "paragraph"
                              content:
                                - type: "text"
                                  text: "Users cannot log in with their credentials"
                                - type: "text"
                                  text: " - "
                                  marks:
                                    - type: "strong"
                                - type: "text"
                                  text: "urgent"
                                  marks:
                                    - type: "strong"
                issuetype:
                  type: string
                  description: The issue type (e.g., Task, Bug, Story)
                  example: "Bug"
                parentKey:
                  type: string
                  description: Parent issue key for subtasks (optional)
                  example: "PROJ-123"
                labels:
                  type: array
                  items:
                    type: string
                  description: Labels to apply to the issue (optional)
                  example: ["bug", "urgent"]
      responses:
        "200":
          description: Issue created successfully
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - issueKey
                properties:
                  success:
                    type: boolean
                    example: true
                  issueKey:
                    type: string
                    description: The Jira issue key
                    example: "PROJ-456"
                  issueId:
                    type: string
                    description: The Jira issue ID
                    example: "12345"
                  url:
                    type: string
                    format: uri
                    description: URL to view the issue
                    example: "https://your-domain.atlassian.net/rest/api/3/issue/12345"
                  message:
                    type: string
                    description: Success message
                    example: "Created Jira issue PROJ-456"
        "400":
          description: Bad request - missing required fields
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Missing required fields"
                  required:
                    type: array
                    items:
                      type: string
                    example: ["summary", "description", "issuetype"]
        "401":
          description: Unauthorized - invalid or missing API key
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Unauthorized"
                  message:
                    type: string
                    example: "Valid API key required"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Internal Server Error"
                  message:
                    type: string
                    example: "Failed to create Jira issue"
  /api/update-issue:
    put:
      tags:
        - Jira Issues
      summary: Update a Jira Issue
      description: Updates an issue in the configured Jira project
      operationId: updateJiraIssue
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - issueId
              properties:
                issueId:
                  type: string
                  description: The Jira issue id or number
                  example: "PROJ-123"
                summary:
                  type: string
                  description: The issue summary/title (optional)
                  example: "Update PUT API"
                description:
                  oneOf:
                    - type: string
                      description: Plain text description (will be converted to ADF format) (optional)
                      example: "As a developer, I want to create a PUT endpoint for Jira issues."
                    - type: object
                      description: |
                        Atlassian Document Format (ADF) JSON object for rich text formatting.
                        Preferred format - supports bold, italic, links, lists, etc.
                        If provided, this will be used directly without conversion.
                      required:
                        - type
                        - version
                        - content
                      properties:
                        type:
                          type: string
                          enum: ["doc"]
                          example: "doc"
                        version:
                          type: number
                          enum: [1]
                          example: 1
                        content:
                          type: array
                          description: Array of ADF content nodes (paragraphs, headings, lists, etc.)
                          items:
                            type: object
                          example:
                            - type: "paragraph"
                              content:
                                - type: "text"
                                  text: "As a developer, I want to create a PUT endpoint for Jira issues."
                                - type: "text"
                                  text: " - "
                                  marks:
                                    - type: "strong"
                                - type: "text"
                                  text: "urgent"
                                  marks:
                                    - type: "strong"
                  issuetype:
                    type: string
                    description: The issue type (e.g. Story or Bug) (optional)
                    example: "Story"
                  parentKey:
                    type: string
                    description: "Parent issue key for issues (optional)"
                    example: "PROJ-123"
                  labels:
                    type: array
                    items:
                      type: string
                    description: Labels to apply to the issue (optional)
                    example: ["POC", "MCP"]
      responses:
        "200":
          description: Issue updated successfully
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                properties:
                  success:
                    type: boolean
                    example: true
        "400":
          description: Bad request - missing required fields
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Missing required fields"
                  required:
                    type: array
                    items:
                      type: string
                    example: ["issueId"]
        "401":
          description: Unauthorized - invalid or missing API key
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Unauthorized"
                  message:
                    type: string
                    example: "Valid API key required"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Internal Server Error"
                  message:
                    type: string
                    example: "Failed to update Jira issue"
